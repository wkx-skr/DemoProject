<!DOCTYPE html>
<html>
<head>
  <title></title>
  <meta http-equiv="X-UA-Compatible" content="IE=EDGE" />
  <meta charset="UTF-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="description" content=" ">
  <meta name="keywords" content="">
<!--  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">-->
  <link rel="shortcut icon" href="./static/guanwang_favicon.png"/>
  <link rel="stylesheet" href="<%= BASE_URL %>static/libs/fake/base.css" />
  <link rel="stylesheet" href="<%= BASE_URL %>static/libs/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" id="defatulThemeCss">
  <link rel="stylesheet" href="<%= BASE_URL %>static/libs/icon/iconStyle.css" />
  <link rel="stylesheet" href="<%= BASE_URL %>static/libs/icon/navStyle.css" />
  <link rel="stylesheet" href="<%= BASE_URL %>static/libs/icon/newStyle.css" />
  <link rel="stylesheet" href="<%= BASE_URL %>static/libs/icon/ddm-fonts/style.css" />
  <link rel="stylesheet" href="<%= BASE_URL %>static/libs/icon/fonts_2020/style.css" />
  <link rel="stylesheet" href="<%= BASE_URL %>static/libs/perfect-scrollbar/dist/css/perfect-scrollbar.min.css" />
  <script src="<%= BASE_URL %>static/libs/jquery/jquery.min.js" ></script>
  <script src="<%= BASE_URL %>static/libs/perfect-scrollbar/dist/js/perfect-scrollbar.min.js"></script>
<!--  <script src="<%= BASE_URL %>static/conf/setting.js"></script>-->
  <script src="<%= BASE_URL %>static/js/jsencrypt2.min.js"></script>
  <script src="<%= BASE_URL %>static/js/pubkey.js"></script>
  <script>
      document.write("<script src='./static/conf/setting.js?"+Math.random()+"'><\/script>");
  </script>
<!--  <script src="<%= BASE_URL %>static/login.js"></script>-->
</head>
<body>
  <script type="text/javascript">
    let NODE_ENV = ''
    try {
      // es-lint-disable-nest-line
      NODE_ENV = <%= JSON.stringify(process.env.NODE_ENV) %>
    } catch (e) {
      console.log(NODE_ENV + '不存在')
    }
    if (window.setting && NODE_ENV !== 'development') {
      let product = window.setting.products.dam
      if (product.webPath !== location.pathname) {
        // if (product.frontendPort !== 80 && product.frontendPort !== 443) {
        //   location.href = location.href.replace(product.frontendPort + location.pathname, product.frontendPort + product.webPath)
        // } else {
        //   location.href = location.href.replace(location.host + location.pathname, location.host + product.webPath)
        // }
      }
    }

    function formatterProduct (product) {
      product.webPath = '/'
      product.hostname = location.hostname
      product.urlPrefix = 'http://'
      product.frontendPort = product.serverPath === '/dam' ? 8081 : 8080
      return product
    }
    if (NODE_ENV === 'development') {
      formatterProduct(setting.products.dam)
      formatterProduct(setting.products.ddm)
    }

    function isIE() { //ie?
      if (!!window.ActiveXObject || "ActiveXObject" in window) {
        return true;
      } else {
        return false;
      }
    }

    if (isIE()) {
      let themeStyle = document.getElementById('defatulThemeCss');
      themeStyle.setAttribute('href', './static/css/theme/custom-theme-default/theme/index.css');
    }

    /**
     * @return {boolean}
     */
    function IsPC() {
      var userAgentInfo = navigator.userAgent;
      var Agents = ["Android", "iPhone", "SymbianOS", "Windows Phone", "iPad", "iPod"];
      var flag = true;
      for (var v = 0; v < Agents.length; v++) {
        if (userAgentInfo.indexOf(Agents[v]) > 0) { flag = false; break; }
      }
      return flag;
    }
    if (IsPC()){
    }else {
      var pathname = '/' + location.pathname.split('/')[1];
      if(pathname.length === 0){
        pathname = '/datablau-server'
      }
      // location.href = pathname + '/ddc.html'
    }
  	function getIEVersion()
		{
		    var rv = -1; // Return value assumes failure.
		    if(navigator.appName == 'Microsoft Internet Explorer') {
		        var ua = navigator.userAgent;
		        var re = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
		if(re.exec(ua) != null)
		    rv = parseFloat(RegExp.$1);
		}
			if(rv <= 9.0 && rv>0){
				window.browser = "ie";
			}else{
				window.browser = 'modern';
			}
		}
  	getIEVersion();
    function getLanguage()
    {
    	if(localStorage.getItem('language') == 'English'){
    		window.lang = 'English';
    		return
    	}else if(localStorage.getItem('language') == 'Chinese'){
    		window.lang = 'Chinese';
    		return
    	}
      if (navigator.appName == 'Netscape')
        var language = navigator.language;
      else
        var language = navigator.browserLanguage;
      if (language.indexOf('en') > -1) window.lang = 'English';
      else if (language.indexOf('zh') > -1) window.lang = 'Chinese';
      else
        window.lang = 'English';
    }
    getLanguage();
    function disableContextmenu () {
        window.document.oncontextmenu = function () {
            return false
        }
    }
    disableContextmenu()
  </script>
<!--  <div id="fake-heading"></div>-->
<!--  <script src="./static/libs/fake/core.js"></script>-->
  <div id="app"></div>
  <!-- built files will be auto injected -->
	<script type="text/javascript">
    mxBasePath = "./static/libs/mxgraph/src";
    // 使用全局定义的变量
    // let process2 = <%= JSON.stringify(process) %>;
    // let env2 = <%= JSON.stringify(process.env) %>;
    // let vue_app_global_data_development = <%= JSON.stringify(process.env.vue_app_global_data_development) %>;
  </script>
	<link rel="stylesheet" href="./static/libs/mxgraph/src/css/common.css">
	<script src="./static/libs/loading-overlay/src/loadingoverlay.min.js"></script>
</body>
</html>
